<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
		PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
		"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="top.reed.automation.mapper.AutoDataSourceMapper">

	<resultMap type="top.reed.automation.domain.AutoDataSource" id="AutoDataSourceResult">
		<result property="id" column="id"/>
		<result property="name" column="name"/>
		<result property="driverClassName" column="driver_class_name"/>
		<result property="jdbcUrl" column="jdbc_url"/>
		<result property="username" column="username"/>
		<result property="password" column="password"/>
		<result property="createDate" column="create_date"/>
	</resultMap>

	<sql id="selectAutoDataSourceVo">
		select id, name, driver_class_name, jdbc_url, username, password, create_date
		from auto_datasource
	</sql>

	<select id="selectAutoDataSourceList" parameterType="top.reed.automation.domain.AutoDataSource"
	        resultMap="AutoDataSourceResult">
		<include refid="selectAutoDataSourceVo"/>
		<where>
			<if test="name != null  and name != ''">and name like concat('%', #{name}, '%')</if>
			<if test="driverClassName != null  and driverClassName != ''">and driver_class_name = #{driverClassName}
			</if>
			<if test="jdbcUrl != null  and jdbcUrl != ''">and jdbc_url like concat('%', #{jdbcUrl}, '%')</if>
			<if test="username != null  and username != ''">and username like concat('%', #{username}, '%')</if>
			<if test="params.beginCreateDate != null and params.beginCreateDate != '' and params.endCreateDate != null and params.endCreateDate != ''">
				and create_date between #{params.beginCreateDate} and #{params.endCreateDate}
			</if>
		</where>
	</select>

	<select id="selectAutoDataSourceById" parameterType="String" resultMap="AutoDataSourceResult">
		<include refid="selectAutoDataSourceVo"/>
		where id = #{id}
	</select>

	<insert id="insertAutoDataSource" parameterType="top.reed.automation.domain.AutoDataSource">
		insert into auto_datasource
		<trim prefix="(" suffix=")" suffixOverrides=",">
			<if test="name != null">name,</if>
			<if test="driverClassName != null and driverClassName != ''">driver_class_name,</if>
			<if test="jdbcUrl != null and jdbcUrl != ''">jdbc_url,</if>
			<if test="username != null and username != ''">username,</if>
			<if test="password != null and password != ''">password,</if>
			<if test="createDate != null">create_date,</if>
		</trim>
		<trim prefix="values (" suffix=")" suffixOverrides=",">
			<if test="name != null">#{name},</if>
			<if test="driverClassName != null and driverClassName != ''">#{driverClassName},</if>
			<if test="jdbcUrl != null and jdbcUrl != ''">#{jdbcUrl},</if>
			<if test="username != null and username != ''">#{username},</if>
			<if test="password != null and password != ''">#{password},</if>
			<if test="createDate != null">#{createDate},</if>
		</trim>
	</insert>

	<update id="updateAutoDataSource" parameterType="top.reed.automation.domain.AutoDataSource">
		update auto_datasource
		<trim prefix="SET" suffixOverrides=",">
			<if test="name != null">name = #{name},</if>
			<if test="driverClassName != null and driverClassName != ''">driver_class_name = #{driverClassName},</if>
			<if test="jdbcUrl != null and jdbcUrl != ''">jdbc_url = #{jdbcUrl},</if>
			<if test="username != null and username != ''">username = #{username},</if>
			<if test="password != null and password != ''">password = #{password},</if>
			<if test="createDate != null">create_date = #{createDate},</if>
		</trim>
		where id = #{id}
	</update>

	<delete id="deleteAutoDataSourceById" parameterType="String">
		delete
		from auto_datasource
		where id = #{id}
	</delete>

	<delete id="deleteAutoDataSourceByIds" parameterType="String">
		delete from auto_datasource where id in
		<foreach item="id" collection="array" open="(" separator="," close=")">
			#{id}
		</foreach>
	</delete>

</mapper>